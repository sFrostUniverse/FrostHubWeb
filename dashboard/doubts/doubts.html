<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FrostHub - Doubts</title>
  <link rel="stylesheet" href="../dashboard.css">
  <link rel="stylesheet" href="doubts.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <div class="layout">
    <!-- Sidebar -->
    <nav id="sidebar" class="sidebar">
      <ul>
        <li><a href="../dashboard.html"><i class="fa-solid fa-house"></i> <span>Dashboard</span></a></li>
        <li><a href="doubts.html" class="active"><i class="fa-solid fa-question-circle"></i> <span>Doubts</span></a></li>
        <li><a href="../timetable/timetable.html"><i class="fa-solid fa-calendar-days"></i> <span>Timetable</span></a></li>
        <li><a href="../notes/notes.html"><i class="fa-solid fa-book"></i> <span>Notes</span></a></li>
        <li class="logout">
          <a href="#" id="logout"><i class="fa-solid fa-right-from-bracket"></i> <span>Logout</span></a>
        </li>
      </ul>
    </nav>

    <!-- Page Content -->
    <div class="page-wrapper">
      <header class="header">
        <button id="sidebarToggle" class="menu-btn">
          <span></span><span></span><span></span>
        </button>
        <h1><i class="fa-solid fa-question-circle"></i> Doubts</h1>
      </header>

      <main class="container">
        <h2><i class="fa-solid fa-list"></i> My Doubts</h2>
        <div id="doubtsList">Loading doubts...</div>
      </main>
    </div>
  </div>

  <!-- Floating Add Doubt Button -->
  <button id="fabAddDoubt" class="fab">
    <i class="fa-solid fa-plus"></i> <span>Add Doubt</span>
  </button>

  <!-- Add Doubt Overlay -->
  <div id="addDoubtOverlay" class="add-doubt-overlay">
    <span class="close">&times;</span>
    <h2><i class="fa-solid fa-pen"></i> Add Doubt</h2>
    <form id="addDoubtForm">
      <input type="text" id="doubtTitle" name="title" placeholder="Enter doubt title" required />
      <textarea id="doubtDescription" name="description" placeholder="Enter description..." rows="3" required></textarea>

      <!-- Drag & Drop Zone -->
      <div id="dropZone" class="drop-zone">
        <p><i class="fa-solid fa-cloud-arrow-up"></i> Drop file here or click to upload</p>
        <input type="file" id="doubtImage" name="image" accept="image/*">
      </div>
      <div id="filePreview" class="file-preview"></div>

      <button type="submit"><i class="fa-solid fa-paper-plane"></i> Submit</button>
    </form>
  </div>

  <!-- Doubt Details Modal -->
  <div id="doubtDetailModal" class="modal hidden">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div id="doubtDetailContent">
        <!-- Filled dynamically by doubts.js -->
        <h2 id="modalTitle">Loading...</h2>
        <p id="modalDescription"></p>
        <div id="modalMeta"></div>
        <div id="modalStatus"></div>

        <!-- Answers section -->
        <h3>Answers</h3>
        <div id="answersList">No answers yet.</div>

        <!-- Answer form -->
        <form id="answerForm" enctype="multipart/form-data">
          <textarea id="answerText" placeholder="Your answer..." required></textarea>
          <input type="file" id="answerImage" accept="image/*" />
          <button type="submit"><i class="fa-solid fa-paper-plane"></i> Submit Answer</button>
        </form>

        <!-- Delete doubt button -->
        <button id="deleteDoubtBtn" style="display:none;color:white;background:red;margin-top:10px;">
          Delete Doubt
        </button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="../../shared/utils.js"></script>
  <script src="../../shared/sidebar.js"></script>
  <script src="doubts.js"></script>
  <script src="../../shared/pageTransition.js"></script>
</body>
</html>
